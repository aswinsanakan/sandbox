<h3><%= @project.name %></h3>
<h3>Client : <%= link_to @project.client.name, client_path(@project.client_id)%></h3>

<%= link_to "edit", edit_project_path(@project.id) %>

<%= link_to "destroy", project_path(@project.id), method: :delete, data: {confirm: "Are you sure?"} %>

<h3>List Tasks</h3>

<h4>Overdue Tasks</h4>

<ul>
	<% @project.overdue_tasks.each do |task| %>
		<li><%= task.title %> - <%= task.due_date %> - <%= task.is_completed %>
			
			<%= form_for task do |f|%>
				<%= f.hidden_field :task_id, value: task.id %>
				<%= f.submit "Mark as complete"%>
			<% end %>
		</li>
	<% end %>
</ul>


<h4>Incomplete Tasks</h4>

<ul>
	<% @project.incomplete_tasks.each do |task| %>
		<li><%= task.title %> - <%= task.due_date %> - <%= task.is_completed %>
			
			<%= form_for task do |f|%>
				<%= f.hidden_field :task_id, value: task.id %>
				<%= f.submit "Mark as complete"%>
			<% end %>
		</li>
	<% end %>
</ul>

<h4>Completed Tasks</h4>

<ul>
	<% @project.completed_tasks.each do |task| %>
		<li><%= task.title %> - <%= task.due_date %> - <%= task.is_completed %>
			
			<%= link_to "Re-open", tasks_mark_as_incomplete_path(task_id: task.id) %>
			<%= form_for task do |f| %>
				<%= f.hidden_field :is_completed, value: false %>
				<%= f.submit "Re-open" %>
			<% end %>

		</li>
	<% end %>
</ul>

<h3>Add Task</h3>

<%= form_for @task do |f|%>
	
	<%= f.hidden_field :project_id, value: @project.id%>

	<%= f.label :title %> </br>
	<%= f.text_field :title %> </br>

	<%= f.label :due_date %> </br>
	<%= f.date_select :due_date %> </br>

	<%= f.label :is_completed %> </br>
	<%= f.check_box :is_completed %> </br>


	<%= f.submit %>

<% end %>

<%= link_to "Back", projects_path %>

<% data = [] %>
<% @tasks.each_with_index do |task,i|%>
	<% data[i] = [] %>
	<% data[i].push(task.title) %>
	<% data[i].push(Date.today - 1.month) %>
	<% data[i].push(task.due_date) %>
<% end %>

<%= timeline(data) %>